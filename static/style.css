:root{
    --maxw:1100px; --gap:16px; --radius:16px;
  --ink:#0f172a; --muted:#64748b; --border:#dbe2f3;
  --bg:#f5f8ff; --card:#ffffff;
  --accent:#3b82f6;   /* blue-500 */
  --accent-2:#2563eb; /* blue-600 */
  --accent-3:#dbeafe; /* blue-100 */
  --shadow:0 12px 28px #0b1b3a14;
  --safe-top:env(safe-area-inset-top, 0px);
  --safe-right:env(safe-area-inset-right, 0px);
  --safe-bottom:env(safe-area-inset-bottom, 0px);
  --safe-left:env(safe-area-inset-left, 0px);
}
*{ box-sizing:border-box; -webkit-tap-highlight-color:transparent }
html,body{ height:100% }
body{
  margin:0; color:var(--ink); background:var(--bg);
  font-family:"Zen Maru Gothic","Noto Sans JP",system-ui,-apple-system,"Segoe UI",Roboto,sans-serif;
  padding:0 0 var(--safe-bottom);
}

 /* Top Nav */
.nav{ position:sticky; top:0; z-index:40; background:#fff; border-bottom:1px solid var(--border); padding-top:var(--safe-top) }
.nav-inner{ width:min(100%,var(--maxw)); margin:0 auto; padding:10px 16px;
            display:flex; align-items:center; justify-content:space-between; gap:12px }
.brand{ display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.02em; }
.brand .badge{ width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg,var(--accent),var(--accent-2)) }
.nav-auth{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; justify-content:flex-end }
.user-greeting{ font-weight:600; color:#1f2937 }
.login{ display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px;
        background:#111827; color:#fff; text-decoration:none; font-weight:700 }
button.login{ border:none; cursor:pointer }        

.auth-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:22px;
  box-shadow:var(--shadow);
  padding:20px;
  display:grid;
  gap:12px;
  position:relative;
  z-index:10;
}
.auth-card form{ display:grid; gap:10px; max-width:320px }
.auth-card input{
  padding:12px 14px;
  border:1px solid var(--border);
  border-radius:12px;
  font-size:15px;
}
.auth-card button{ cursor:pointer }

.auth-modal{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; padding:24px; z-index:200 }
.auth-modal[hidden]{ display:none }
.auth-modal__overlay{ position:absolute; inset:0; background:#0f172a99 }
.auth-modal__body{ position:relative; z-index:1; background:#fff; border-radius:24px; padding:26px 24px 28px; width:min(420px,100%);
  display:grid; gap:18px; box-shadow:var(--shadow); border:1px solid var(--border) }
.auth-modal__close{ position:absolute; top:14px; right:14px; border:none; background:transparent; font-size:20px; cursor:pointer;
  color:#475569 }
.auth-modal__form{ display:grid; gap:12px }
.auth-modal__label{ display:grid; gap:6px; font-size:14px; color:#1f2a44 }
.auth-modal__label input{ padding:12px 14px; border:1px solid var(--border); border-radius:12px; font-size:15px }
.auth-modal__submit{ justify-content:center }
.auth-modal__footer{ display:grid; gap:8px; text-align:center; font-size:14px; color:#475569 }
.auth-modal__footer .btn{ justify-content:center; font-weight:700 }
body.modal-open{ overflow:hidden }

.search-history-card{
  border-top:1px solid var(--border);
  padding:14px 16px 18px;
  background:#f8fbff;
}
.search-history-card h3{
  margin:0 0 10px;
  font-size:15px;
  color:#1f2a44;
}
.search-history-list{ display:flex; gap:8px; flex-wrap:wrap }
.search-history-list button{
  border:1px solid var(--accent-3);
  border-radius:999px;
  background:#fff;
  padding:6px 12px;
  font-size:13px;
  cursor:pointer;
  color:#1f2a44;
}
.search-history-list button:hover{ border-color:var(--accent); box-shadow:0 0 0 3px #3b82f622 }
        
  /* Hero */
.hero{
  background:
    radial-gradient(1200px 600px at 80% -20%, #eaf2ff 0%, transparent 55%),
    linear-gradient(180deg, #fff 0%, #fff 40%, #eef5ff 100%);
  border-bottom:1px solid var(--border);
}
.hero-inner{ width:min(100%,var(--maxw)); margin:0 auto; padding:28px 16px 24px }
.hero h1{ margin:0 0 10px; font-size:clamp(22px,2.4vw+14px,36px); line-height:1.2; letter-spacing:.02em }
.hero p{ margin:0; color:#3a4a60; font-size:clamp(14px,1.2vw+10px,18px) }

  /* Search Card */
.wrap{ width:min(100%,var(--maxw)); margin:0 auto; padding:16px }
.search-card{ background:var(--card); border:1px solid var(--border); border-radius:22px; box-shadow:var(--shadow); overflow:hidden }
.search-top{ padding:16px; border-bottom:1px solid var(--border) }
.search-wrap{ display:flex; justify-content:center }
.search-bar{ display:grid; grid-template-columns:1fr auto; gap:8px; width:min(820px,94vw) }
.search-bar input{ padding:16px 18px; font-size:16px; border:1px solid var(--border); border-radius:999px; background:#ffffff }
.search-bar button{
  padding:16px 18px; font-size:16px; border-radius:999px; border:1px solid transparent;
  background:linear-gradient(180deg,var(--accent),var(--accent-2)); color:#fff; font-weight:700; cursor:pointer;
  box-shadow:0 6px 16px #3b82f633
}
  .geo-cascade{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:12px }
.geo-cascade select{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  padding:12px 14px; border:1px solid var(--border); border-radius:12px; background:#fff url("data:image/svg+xml,%3Csvg width='14' height='10' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l6 6 6-6' stroke='%2364748b' stroke-width='2' fill='none'/%3E%3C/svg%3E") no-repeat right 10px center/14px 10px;
  min-width: 200px; font-size:14px; color:var(--ink)
}

  .filters{ display:flex; gap:10px; align-items:center; color:#334155; font-size:15px; flex-wrap:wrap; justify-content:center; padding:12px 16px }
.filters small{ color:var(--muted) }
  /* Layout */
.layout{ display:grid; gap:var(--gap); grid-template-columns:1fr; padding:16px }
@media(min-width:900px){ .layout{ grid-template-columns:420px 1fr } }

 .panel{ border:1px solid var(--border); border-radius:20px; background:var(--card); overflow:clip; box-shadow:0 10px 24px #0000000a }
.panel h2{ margin:0; padding:12px 14px; font-size:18px; border-bottom:1px solid var(--border); background:#fff;
           letter-spacing:.02em }
 /* Card list */
.list{ padding:12px; display:grid; gap:12px; max-height:70vh; overflow:auto }
.card{
  border:1px solid var(--border); border-radius:18px; background:#fff; overflow:hidden;
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
.card:hover{ transform:translateY(-2px); box-shadow:0 10px 24px #00000014; }
.card.selected{ box-shadow:0 0 0 4px #3b82f622; border-color:var(--accent); }
.card-hero{ position:relative; width:100%; aspect-ratio:16/9; background:linear-gradient(180deg,#eef2ff,#fff); display:block; overflow:hidden; }
.card-hero img{ width:100%; height:100%; object-fit:cover; display:block; }
.card-hero .badge{ position:absolute; left:10px; top:10px; background:#f8fbffcc; border:1px solid var(--border);
  color:#1f2a44; padding:6px 10px; border-radius:999px; font-size:12px; backdrop-filter:blur(4px); }
.card-hero .rating{ position:absolute; right:10px; top:10px; background:#1f2937cc; color:#fff; padding:6px 10px; border-radius:999px;
  font-size:12px; display:flex; align-items:center; gap:6px; backdrop-filter:blur(4px); }
.stars{ display:inline-flex; gap:2px; user-select:none }
.star{ font-size:14px; line-height:1; color:#d1d5db }
.star.filled{ color:#d1a23e } /* 星は金色 */

 .card-body{ padding:12px 12px 14px; display:grid; gap:8px }
.card h3{ margin:0; font-size:16px; letter-spacing:.01em }
.muted{ color:var(--muted) }
.row{ display:flex; gap:8px; flex-wrap:wrap; align-items:center }
.tag{ font-size:12px; color:#334155; background:#eef2ff; padding:4px 10px; border-radius:999px; border:1px solid var(--accent-3) }
.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 12px; min-height:40px; border-radius:12px; border:1px solid var(--border); background:#fff; text-decoration:none; color:var(--ink); cursor:pointer; font-size:14px }
.btn.primary{ background:linear-gradient(180deg,var(--accent),var(--accent-2)); color:#fff; border-color:transparent; font-weight:700 }
.btn.ghost{ background:#fff; border-color:var(--accent-3); color:#1f2a44; }
.btn.fav-btn.active{ border-color:#f59e0b; box-shadow:0 0 0 3px #f59e0b22 }

  #map{ width:100%; height:60vh; min-height:52vh; border:1px solid var(--border); border-radius:20px; position:relative; z-index:1 }
.mapbar{ display:flex; gap:8px; align-items:center; padding:10px 12px; border-top:1px solid var(--border); background:#fff; flex-wrap:wrap }
.radiusWrap{ display:flex; gap:8px; align-items:center }
input[type="range"]{ touch-action:none }
.pills{ display:flex; gap:6px; flex-wrap:wrap }
.pill{ padding:6px 10px; border:1px solid var(--accent-3); border-radius:999px; font-size:13px; background:#fff; cursor:pointer }
.pill.active{ border-color:var(--accent); box-shadow:0 0 0 3px #3b82f622 }

  /* Tag filter dropdown */
.tag-filter-wrap{ display:flex; justify-content:center; padding:10px 14px 0; }
#tagSelect{
  min-width:min(100%, 360px); height:42px; border-radius:12px; border:1px solid var(--accent-3);
  background:#fff; color:#1f2a44; padding:0 12px; font-size:14px;
}


  footer{ width:min(100%,var(--maxw)); margin:0 auto; padding:24px 16px calc(24px + var(--safe-bottom)); color:var(--muted); font-size:13px }

 /* Slide panel (detail / comments) */
.panel-detail{
  position:fixed; left:0; right:0; bottom:0; height:min(76vh,560px); background:#0f172a; color:#fff;
  border-radius:16px 16px 0 0; box-shadow:0 -10px 30px #0005;
  transform:translateY(100%); transition:transform .28s ease; z-index:10000;
   display:grid; grid-template-rows:auto 1fr auto; gap:12px; padding:16px; padding-bottom:calc(16px + var(--safe-bottom)); overflow:hidden;
}
.panel-detail.is-active{ transform:translateY(0) }
.panel-detail .content{ min-height:0; overflow-y:auto; -webkit-overflow-scrolling:touch; }
.closeBtn{ background:#111827; color:#fff; border:1px solid #374151; border-radius:10px; padding:8px 12px; cursor:pointer }
.comment-block{ background:#0b1220; border:1px solid #374151; border-radius:12px; padding:12px }
.comment-line{ background:#0b1220; border:1px solid #374151; border-radius:12px; padding:10px 12px }
.comment-line + .comment-line{ margin-top:8px }
.comment-line small{ color:#9ca3af }
.comment-form{ display:grid; gap:8px }
.comment-form input,.comment-form textarea{ padding:10px 12px; border:1px solid #374151; border-radius:10px; font-size:14px; background:#081120; color:#fff }
.comment-form button{ background:#2563eb; color:#fff; border:1px solid #2563eb; border-radius:10px; padding:10px 12px; cursor:pointer }
.muted-on-dark{ color:#9ca3af }
.map-embed iframe{ width:100%; height:260px; border:0; border-radius:12px }
a.link-on-dark{ color:#93c5fd }

  /* Toast */
  .toast{
    position:fixed; left:50%; transform:translateX(-50%);
    bottom:calc(16px + var(--safe-bottom));
    background:#111827; color:#fff;
    padding:10px 14px; border-radius:10px; font-weight:600;
    opacity:0; pointer-events:none;
    transition:opacity .25s ease, transform .25s ease;
    z-index:9999;
  }
  .toast.show{
    opacity:1; pointer-events:auto;
    transform:translateX(-50%) translateY(-4px);
  }

  /* Rating stars in comment form */
  .rating-input{ display:flex; align-items:center; gap:8px }
  .rating-input .star-btn{
    background:transparent; border:none; color:var(--muted); font-size:20px; line-height:1; cursor:pointer; padding:6px; border-radius:6px;
    transition:color .12s ease, transform .12s ease, background .12s ease;
  }
  .rating-input .star-btn:hover{ color:#fbbf24; transform:translateY(-2px); }
  .rating-input .star-btn:focus{ outline:2px solid #fbbf24; outline-offset:2px; }
  .rating-input .star-btn.active{ color:#f59e0b; transform:scale(1.08); }
  .rating-input .star-btn.preview{ color:#fcd34d; }

.auth-page{ min-height:100%; display:flex; flex-direction:column }
.auth-page main{ flex:1; display:flex; align-items:center; justify-content:center; padding:32px 16px calc(32px + var(--safe-bottom)); }
.auth-page .wrap{ width:min(100%,420px); margin:0 auto; padding:0 16px }
.auth-page .auth-card{ width:100%; gap:16px }
.auth-page__lead{ margin:0; font-size:14px; color:#475569 }
.auth-page__message{ padding:12px 14px; border-radius:12px; background:#ecfdf5; border:1px solid #bbf7d0; color:#047857; font-size:14px }
.auth-page__error{ padding:12px 14px; border-radius:12px; background:#fef2f2; border:1px solid #fecaca; color:#b91c1c; font-size:14px }
.auth-page__footer{ display:flex; justify-content:center }